<div class="app-layout">
  <app-desktop-header
    class="desktop-only"
    (addAsset)="onAddAsset()"
    [user]="authStore.user()"
    (logout)="authStore.logout()"
  >
  </app-desktop-header>

  <main class="main-content">
    <section class="header-section">
      <div class="wealth-wrapper">
        <app-total-wealth-card 
          [assets]="assetsWithMarketValue()">
        </app-total-wealth-card>
      </div>

      <div class="trend-wrapper card" [class.mobile-collapsed]="settingsStore.trendChartCollapsed()">
        <div class="card-header">
          <div class="section-title">資產趨勢</div>
          
          <!-- Collapse Button: Visible only on mobile (< 1024px) via CSS -->
          <button 
            class="btn-icon-sm mobile-collapse-btn"
            (click)="settingsStore.toggleTrendChartCollapsed()"
            [title]="settingsStore.trendChartCollapsed() ? '展開' : '收合'"
          >
            <span class="material-symbols-rounded">
              {{ settingsStore.trendChartCollapsed() ? 'keyboard_arrow_down' : 'keyboard_arrow_up' }}
            </span>
          </button>
        </div>

        <div class="chart-container">
          <div class="chart-placeholder">Trend Chart Coming Soon...</div>
        </div>
      </div>
    </section>

    <section class="analytics-section">
      <app-widget-collection 
        [assets]="assetsWithMarketValue()" 
        [loading]="assetStore.isLoading()">
      </app-widget-collection>
    </section>

    <section class="assets-section">
      <app-asset-collection
        [assets]="assetsWithMarketValue()"
      >
      </app-asset-collection>
    </section>

    <div class="spacer-bottom"></div>
  </main>

  <app-mobile-nav
    class="mobile-only"
    (addAsset)="onAddAsset()"
    [user]="authStore.user()"
    (logout)="authStore.logout()"
  >
  </app-mobile-nav>
</div>