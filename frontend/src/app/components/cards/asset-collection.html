<div class="collection-container">
  <div class="header-row">
    <div class="title-group">
      <h3>我的資產庫</h3>
      <span class="count-badge">{{ displayedAssets().length }}</span>
    </div>

    <div class="tools-group">
      <!-- Filter Toggle Button -->
      <button 
        class="btn-icon-sm" 
        [class.active]="filterComponent().isPanelOpen() || filterComponent().isActive()"
        (click)="filterComponent().toggle()"
        title="篩選資產"
      >
        <span class="material-symbols-rounded">filter_list</span>
        @if (filterComponent().isActive() && !filterComponent().isPanelOpen()) {
          <span class="dot"></span>
        }
      </button>
    </div>
  </div>

  <app-asset-filter [assets]="assets()" (filterChange)="onFilterChange($event)"></app-asset-filter>

  <div class="grid-layout">
    @for (asset of displayedAssets(); track asset.id) {
      <app-asset-card [asset]="asset"></app-asset-card>
    }

    <div class="add-card-btn" (click)="openAddAsset()">
      <span class="plus-icon">+</span>
      <span>新增資產</span>
    </div>
  </div>
</div>